function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw;a=self;b=a.Samples=a.Samples||{};c=b.HelloWorld=b.HelloWorld||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Obj=d.Obj||{};g=d.UI=d.UI||{};h=g.Var$1=g.Var$1||{};i=g.Doc=g.Doc||{};j=a.Promise;k=g.Var=g.Var||{};l=g.ConcreteVar=g.ConcreteVar||{};m=g.Snap=g.Snap||{};n=g.Array=g.Array||{};o=g.Client=g.Client||{};p=o.Templates=o.Templates||{};q=d.JavaScript=d.JavaScript||{};r=q.Pervasives=q.Pervasives||{};s=g.Abbrev=g.Abbrev||{};t=s.Fresh=s.Fresh||{};u=g.View=g.View||{};v=d.Arrays=d.Arrays||{};w=d.List=d.List||{};x=w.T=w.T||{};y=d.Unchecked=d.Unchecked||{};z=a.Object;A=g.DomUtility=g.DomUtility||{};B=a.EventTarget;C=a.Node;D=q.JS=q.JS||{};E=d.Collections=d.Collections||{};F=E.Dictionary=E.Dictionary||{};G=g.AttrProxy=g.AttrProxy||{};H=g.DocElemNode=g.DocElemNode||{};I=a.CharacterData;J=d.Enumerator=d.Enumerator||{};K=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};L=E.HashSet=E.HashSet||{};M=d.Seq=d.Seq||{};N=a.WindowOrWorkerGlobalScope;O=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};P=g.Docs=g.Docs||{};Q=g.Elt=g.Elt||{};R=J.T=J.T||{};S=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};T=o.Attrs=o.Attrs||{};U=T.Dyn=T.Dyn||{};V=E.DictionaryUtil=E.DictionaryUtil||{};W=p.Prepare=p.Prepare||{};X=d.Slice=d.Slice||{};Y=E.KeyCollection=E.KeyCollection||{};Z=g.An=g.An||{};_0=o.Settings=o.Settings||{};_1=s.Mailbox=s.Mailbox||{};_2=g.Updates=g.Updates||{};_3=g.Attrs=g.Attrs||{};_4=d.Strings=d.Strings||{};_5=o.Docs=o.Docs||{};_6=_5.RunState=_5.RunState||{};_7=_5.NodeSet=_5.NodeSet||{};_8=g.Anims=g.Anims||{};_9=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};_=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};$=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};ba=d.Concurrency=d.Concurrency||{};bb=g.AppendList=g.AppendList||{};bc=E.HashSetUtil=E.HashSetUtil||{};bd=d.Queue=d.Queue||{};be=g.Easing=g.Easing||{};bf=ba.AsyncBody=ba.AsyncBody||{};bg=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bh=ba.CT=ba.CT||{};bi=s.HashSet=s.HashSet||{};bj=ba.Scheduler=ba.Scheduler||{};bk=d.CancellationTokenSource=d.CancellationTokenSource||{};bl=_5.DomNodes=_5.DomNodes||{};bm=a.Error;bn=d.OperationCanceledException=d.OperationCanceledException||{};bo=d.Lazy=d.Lazy||{};bp=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bq=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};br=bq.LazyRecord=bq.LazyRecord||{};bs=a.IntelliFactory;bt=bs&&bs.Runtime;bu=a.console;bv=a.jQuery;bw=a.Date;c.Main=function(){var bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;bx=(by={},by.titleText="Welcome!",by.text="Welcome to my snippet! Here you will witness various features of SweetAlert",by.type="success",by);bz=(bA={},bA.titleText="Warning!",bA.text="This is a warning type box, with a cancel button",bA.type="warning",bA.allowOutsideClick=false,bA.showCancelButton=true,bA);bB=(bC={},bC.titleText="Error!",bC.text="This is an error type box, with custom button color",bC.type="error",bC.confirmButtonColor="#BB0000",bC);bD=(bE={},bE.titleText="Information",bE.text="This is an info type box, with a custon background color",bE.type="info",bE.background="#dff",bE);bF=(bG={},bG.titleText="Question Box",bG.text="Type something into the input field, and let's see what happens!",bG.type="question",bG.input="text",bG.confirmButtonText="Send",bG);bH=a.Sweetalert2(bx);bI=i.Button("Warning",[],function(){var bN;bN=a.Sweetalert2(bz);});bJ=i.Button("Error",[],function(){var bN;bN=a.Sweetalert2(bB);});bK=i.Button("Info",[],function(){var bN;bN=a.Sweetalert2(bD);});h.Create$1("");bL=i.Button("Click me!",[],function(){var bN;(bN=a.Sweetalert2(bF),bN).then(function(bO){var bP,bQ;bP=a.Sweetalert2((bQ={},bQ.titleText="Result",bQ.text="You wrote: "+bO,bQ.type="info",bQ)),bP;});});bM=i.Concat([i.Element("h1",[],[i.TextNode("WebSharper.SweetAlert")]),i.Element("p",[],[i.TextNode("You have already seen the success box, now let's have a look at the other basic box types:")]),i.Element("ul",[],[i.Element("li",[],[bI]),i.Element("li",[],[bJ]),i.Element("li",[],[bK])]),i.Element("p",[],[i.TextNode("Now, let's see the question type button, with a much more interesting example:")]),i.Element("br",[],[]),bL]);p.LoadLocalTemplates("");i.RunById("main",bM);};e.FailWith=function(bx){throw new bm(bx);};e.KeyValue=function(bx){return[bx.K,bx.V];};f=d.Obj=bt.Class({Equals:function(bx){return this===bx;},GetHashCode:function(){return -1;}},null,f);f.New=bt.Ctor(function(){},f);h=g.Var$1=bt.Class({},f,h);h.Create$1=function(bx){return new l.New(false,m.New({$:2,$0:bx,$1:[]}),bx);};i=g.Doc=bt.Class({},f,i);i.Concat=function(bx){var by;by=n.ofSeqNonCopying(bx);return n.TreeReduce(i.get_Empty(),i.Append,by);};i.Append=function(bx,by){return i.Mk({$:0,$0:bx.docNode,$1:by.docNode},u.Map2Unit(bx.updates,by.updates));};i.get_Empty=function(){return i.Mk(null,u.Const());};i.TextNode=function(bx){return i.Mk({$:5,$0:A.CreateText(bx)},u.Const());};i.RunById=function(bx,by){var bz;bz=A.Doc().getElementById(bx);y.Equals(bz,null)?e.FailWith("invalid id: "+bx):i.Run(bz,by);};i.Button=function(bx,by,bz){var bA;bA=G.Concat(by);return Q.New(i.Clickable("button",bz),bA,i.TextNode(bx));};i.Mk=function(bx,by){return new i.New(bx,by);};i.Element=function(bx,by,bz){var bA,bB;bA=G.Concat(by);bB=i.Concat(bz);return Q.New(A.CreateElement(bx),bA,bB);};i.Run=function(bx,by){P.LinkElement(bx,by.docNode);i.RunInPlace(false,bx,by);};i.Clickable=function(bx,by){var bz;bz=A.CreateElement(bx);bz.addEventListener("click",function(bA){bA.preventDefault();return by();},false);return bz;};i.RunInPlace=function(bx,by,bz){var bA;bA=P.CreateRunState(by,bz.docNode);u.Sink(Z.get_UseAnimations()||_0.BatchUpdatesEnabled()?_1.StartProcessor(P.PerformAnimatedUpdate(bx,bA,bz.docNode)):function(){P.PerformSyncUpdate(bx,bA,bz.docNode);},bz.updates);};i.New=bt.Ctor(function(bx,by){f.New.call(this);this.docNode=bx;this.updates=by;},i);k=g.Var=bt.Class({},f,k);k.New=bt.Ctor(function(){f.New.call(this);},k);l=g.ConcreteVar=bt.Class({},k,l);l.New=bt.Ctor(function(bx,by,bz){var bA;bA=this;k.New.call(this);this.isConst=bx;this.current=bz;this.snap=by;this.view=function(){return bA.snap;};this.id=t.Int();},l);m.Map2Unit=function(bx,by){var bz,bA,bB;function bC(){var bD,bE,bF;if(!(bD=bB.s,bD!=null&&bD.$==0||bD!=null&&bD.$==2)){bE=m.ValueAndForever(bx);bF=m.ValueAndForever(by);bE!=null&&bE.$==1?bF!=null&&bF.$==1?bE.$0[1]&&bF.$0[1]?m.MarkForever(bB,null):m.MarkReady(bB,null):void 0:void 0;}}bz=bx.s;bA=by.s;return bz!=null&&bz.$==0?bA!=null&&bA.$==0?m.New({$:0,$0:null}):by:bA!=null&&bA.$==0?bx:(bB=m.New({$:3,$0:[],$1:[]}),(m.When(bx,bC,bB),m.When(by,bC,bB),bB));};m.WhenObsoleteRun=function(bx,by){var bz;bz=bx.s;bz==null?by():bz!=null&&bz.$==2?bz.$1.push(by):bz!=null&&bz.$==3?bz.$1.push(by):void 0;};m.ValueAndForever=function(bx){var by;by=bx.s;return by!=null&&by.$==0?{$:1,$0:[by.$0,true]}:by!=null&&by.$==2?{$:1,$0:[by.$0,false]}:null;};m.MarkForever=function(bx,by){var bz,bA,bB,bC;bz=bx.s;if(bz!=null&&bz.$==3){bx.s={$:0,$0:by};bA=bz.$0;for(bB=0,bC=v.length(bA)-1;bB<=bC;bB++)(v.get(bA,bB))(by);}else void 0;};m.MarkReady=function(bx,by){var bz,bA,bB,bC;bz=bx.s;if(bz!=null&&bz.$==3){bx.s={$:2,$0:by,$1:bz.$1};bA=bz.$0;for(bB=0,bC=v.length(bA)-1;bB<=bC;bB++)(v.get(bA,bB))(by);}else void 0;};m.When=function(bx,by,bz){var bA;bA=bx.s;bA==null?m.Obsolete(bz):bA!=null&&bA.$==2?(m.EnqueueSafe(bA.$1,bz),by(bA.$0)):bA!=null&&bA.$==3?(bA.$0.push(by),m.EnqueueSafe(bA.$1,bz)):by(bA.$0);};m.EnqueueSafe=function(bx,by){var bz,bA,bB,bC;bx.push(by);if(bx.length%20===0){bz=bx.slice(0);bd.Clear(bx);for(bA=0,bB=v.length(bz)-1;bA<=bB;bA++){bC=v.get(bz,bA);typeof bC=="object"?function(bD){if(bD.s)bx.push(bD);}(bC):function(bD){bx.push(bD);}(bC);}}else void 0;};m.WhenRun=function(bx,by,bz){var bA;bA=bx.s;bA==null?bz():bA!=null&&bA.$==2?(bA.$1.push(bz),by(bA.$0)):bA!=null&&bA.$==3?(bA.$0.push(by),bA.$1.push(bz)):by(bA.$0);};m.Copy=function(bx){var by,bz,bA;by=bx.s;return by==null?bx:by!=null&&by.$==2?(bz=m.New({$:2,$0:by.$0,$1:[]}),(m.WhenObsolete(bx,bz),bz)):by!=null&&by.$==3?(bA=m.New({$:3,$0:[],$1:[]}),(m.When(bx,function(bB){m.MarkDone(bA,bx,bB);},bA),bA)):bx;};m.WhenObsolete=function(bx,by){var bz;bz=bx.s;bz==null?m.Obsolete(by):bz!=null&&bz.$==2?m.EnqueueSafe(bz.$1,by):bz!=null&&bz.$==3?m.EnqueueSafe(bz.$1,by):void 0;};m.MarkDone=function(bx,by,bz){var bA;if(bA=by.s,bA!=null&&bA.$==0)m.MarkForever(bx,bz);else m.MarkReady(bx,bz);};n.ofSeqNonCopying=function(bx){var by,bz;if(bx instanceof a.Array)return bx;else if(bx instanceof x)return v.ofList(bx);else if(bx===null)return[];else{by=[];bz=J.Get(bx);try{while(bz.MoveNext())by.push(bz.Current());return by;}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}}};n.TreeReduce=function(bx,by,bz){var bA;function bB(bC,bD){var bE,bF;return bD<=0?bx:bD===1&&(bC>=0&&bC<bA)?v.get(bz,bC):(bF=bD/2>>0,by(bB(bC,bF),bB(bC+bF,bD-bF)));}bA=v.length(bz);return bB(0,bA);};n.MapTreeReduce=function(bx,by,bz,bA){var bB;function bC(bD,bE){var bF,bG;return bE<=0?by:bE===1&&(bD>=0&&bD<bB)?bx(v.get(bA,bD)):(bG=bE/2>>0,bz(bC(bD,bG),bC(bD+bG,bE-bG)));}bB=v.length(bA);return bC(0,bB);};p.LoadLocalTemplates=function(bx){!p.LocalTemplatesLoaded()?(p.set_LocalTemplatesLoaded(true),p.LoadNestedTemplates(self.document.body,"")):void 0;p.LoadedTemplates().set_Item(bx,p.LoadedTemplateFile(""));};p.LocalTemplatesLoaded=function(){K.$cctor();return K.LocalTemplatesLoaded;};p.set_LocalTemplatesLoaded=function(bx){K.$cctor();K.LocalTemplatesLoaded=bx;};p.LoadNestedTemplates=function(bx,by){var bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN;function bz(bO){var bP,bQ;if(!bA.ContainsKey(bO)){bP=(bQ=null,[bB.TryGetValue(bO,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);bP[0]?(bN.Add(bO),bB.Remove(bO),p.PrepareTemplateStrict(by,{$:1,$0:bO},bP[1][0],{$:1,$0:bP[1][1]},{$:1,$0:bz})):bu.warn(bN.Contains(bO)?"Encountered loop when instantiating "+bO:"Local template does not exist: "+bO);}}bA=p.LoadedTemplateFile(by);bB=new F.New$5();bC=bx.querySelectorAll("[ws-template]");for(bD=0,bE=bC.length-1;bD<=bE;bD++){bF=bC[bD];bG=bF.getAttribute("ws-template").toLowerCase();bF.removeAttribute("ws-template");bB.set_Item(bG,[[bF],p.FakeRootSingle(bF)]);}bH=bx.querySelectorAll("[ws-children-template]");for(bI=0,bJ=bH.length-1;bI<=bJ;bI++){bK=bH[bI];bL=bK.getAttribute("ws-children-template").toLowerCase();bK.removeAttribute("ws-children-template");bB.set_Item(bL,(bM=A.ChildrenArray(bK),[bM,p.FakeRoot(bM)]));}bN=new L.New$3();while(bB.count>0)bz(M.head(bB.get_Keys()));};p.LoadedTemplates=function(){K.$cctor();return K.LoadedTemplates;};p.LoadedTemplateFile=function(bx){var by,bz,bA;by=(bz=null,[p.LoadedTemplates().TryGetValue(bx,{get:function(){return bz;},set:function(bB){bz=bB;}}),bz]);return by[0]?by[1]:(bA=new F.New$5(),(p.LoadedTemplates().set_Item(bx,bA),bA));};p.FakeRootSingle=function(bx){var by,bz,bA;bx.removeAttribute("ws-template");by=bx.getAttribute("ws-replace");by===null?void 0:(bx.removeAttribute("ws-replace"),bz=bx.parentNode,y.Equals(bz,null)?void 0:(bA=self.document.createElement(bx.tagName),bA.setAttribute("ws-replace",by),bz.replaceChild(bA,bx)));return p.FakeRoot([bx]);};p.FakeRoot=function(bx){var by,bz,bA;by=self.document.createElement("div");for(bz=0,bA=bx.length-1;bz<=bA;bz++)by.appendChild(v.get(bx,bz));return by;};p.PrepareTemplateStrict=function(bx,by,bz,bA,bB){var bC,bD;function bE(bJ,bK){var bL,bM,bN,bO,bP,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$;function bQ(ca){}while(true)switch(bJ){case 0:if(bK!==null){bL=bK.nextSibling;if(y.Equals(bK.nodeType,C.TEXT_NODE))W.convertTextNode(bK);else if(y.Equals(bK.nodeType,C.ELEMENT_NODE))bG(bK);bK=bL;}else return null;break;case 1:bR=X.string(bK.nodeName,{$:1,$0:3},null).toLowerCase();bS=(bM=bR.indexOf("."),bM===-1?[bx,bR]:[X.string(bR,null,{$:1,$0:bM-1}),X.string(bR,{$:1,$0:bM+1},null)]);bT=bS[1];bU=bS[0];if(bU!==""&&!p.LoadedTemplates().ContainsKey(bU))return W.failNotLoaded(bT);else{if(bU===""&&bB!=null)bB.$0(bT);bV=p.LoadedTemplates().get_Item(bU);if(!bV.ContainsKey(bT))return W.failNotLoaded(bT);else{bW=bV.get_Item(bT);bX=bW.cloneNode(true);bY=new L.New$3();bZ=new F.New$5();b0=bK.attributes;for(b1=0,b2=b0.length-1;b1<=b2;b1++){b3=b0.item(b1).name.toLowerCase();bZ.set_Item(b3,(b4=b0.item(b1).nodeValue,b4===""?b3:b4.toLowerCase()));!bY.Add(b3)?bu.warn("Hole mapped twice",b3):void 0;}for(b5=0,b6=bK.childNodes.length-1;b5<=b6;b5++){b7=bK.childNodes[b5];y.Equals(b7.nodeType,C.ELEMENT_NODE)?!bY.Add(b7.nodeName.toLowerCase())?bu.warn("Hole filled twice",bT):void 0:void 0;}b8=bK.childNodes.length===1&&y.Equals(bK.firstChild.nodeType,C.TEXT_NODE);if(b8){bO=W.fillTextHole(bX,bK.firstChild.textContent,bT);((function(ca){return function(cb){if(cb!=null)ca(cb.$0);};}((bP=function(ca){return function(cb){return ca.Add(cb);};}(bY),function(ca){return bQ(bP(ca));})))(bO));}W.removeHolesExcept(bX,bY);if(!b8){for(b9=0,b_=bK.childNodes.length-1;b9<=b_;b9++){b$=bK.childNodes[b9];y.Equals(b$.nodeType,C.ELEMENT_NODE)?b$.hasAttributes()?W.fillInstanceAttrs(bX,b$):bF(bX,b$):void 0;}}W.mapHoles(bX,bZ);W.fill(bX,bK.parentNode,bK);bK.parentNode.removeChild(bK);return;}}break;}}function bF(bJ,bK){var bL,bN,bO;function bM(bP,bQ){var bR,bS,bT;if(bN==="title"&&bK.hasChildNodes()){bR=bv.parseHTML(bK.textContent);bK.removeChild(bK.firstChild);for(bS=0,bT=bR.length-1;bS<=bT;bS++)bK.appendChild(v.get(bR,bS));}else null;bG(bK);return W.fill(bK,bP,bQ);}bN=bK.nodeName.toLowerCase();A.IterSelector(bJ,"[ws-attr-holes]",function(bP){var bQ,bR,bS,bT,bU;bQ=_4.SplitChars(bP.getAttribute("ws-attr-holes"),[" "],1);for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=v.get(bQ,bR);bP.setAttribute(bT,(bU=new a.RegExp("\\${"+bN+"}","ig"),bP.getAttribute(bT).replace(bU,bK.textContent)));}});bO=bJ.querySelector("[ws-hole="+bN+"]");if(y.Equals(bO,null)){bL=bJ.querySelector("[ws-replace="+bN+"]");return y.Equals(bL,null)?null:(bM(bL.parentNode,bL),void bL.parentNode.removeChild(bL));}else{while(bO.hasChildNodes())bO.removeChild(bO.lastChild);bO.removeAttribute("ws-hole");return bM(bO,null);}}function bG(bJ){if(_4.StartsWith(bJ.nodeName.toLowerCase(),"ws-"))bI(bJ);else{W.convertAttrs(bJ);bH(bJ.firstChild);}}function bH(bJ){return bE(0,bJ);}function bI(bJ){return bE(1,bJ);}bC=bA==null?p.FakeRoot(bz):bA.$0;bD=(by==null?"":by.$0).toLowerCase();p.LoadedTemplateFile(bx).set_Item(bD,bC);v.length(bz)>0?(function(bJ){var bK,bL,bM,bN;while(true){bK=bJ.querySelector("[ws-template]");if(y.Equals(bK,null)){bL=bJ.querySelector("[ws-children-template]");if(y.Equals(bL,null))return null;else{bM=bL.getAttribute("ws-children-template");bL.removeAttribute("ws-children-template");p.PrepareTemplateStrict(bx,{$:1,$0:bM},A.ChildrenArray(bL),null,null);bJ=bJ;}}else{bN=bK.getAttribute("ws-template");(p.PrepareSingleTemplate(bx,{$:1,$0:bN},bK))(null);bJ=bJ;}}}(bC),bH(v.get(bz,0))):void 0;};p.PrepareSingleTemplate=function(bx,by,bz){var bA,bB,bC;bA=p.FakeRootSingle(bz);bB=[bz];bC={$:1,$0:bA};return function(bD){p.PrepareTemplateStrict(bx,by,bB,bC,bD);};};p.TextHoleRE=function(){K.$cctor();return K.TextHoleRE;};r.NewFromSeq=function(bx){var by,bz,bA;by={};bz=J.Get(bx);try{while(bz.MoveNext()){bA=bz.Current();by[bA[0]]=bA[1];}}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}return by;};t.Int=function(){t.set_counter(t.counter()+1);return t.counter();};t.set_counter=function(bx){S.$cctor();S.counter=bx;};t.counter=function(){S.$cctor();return S.counter;};u=g.View=bt.Class({},null,u);v.get=function(bx,by){v.checkBounds(bx,by);return bx[by];};v.length=function(bx){return bx.dims===2?bx.length*bx.length:bx.length;};v.checkBounds=function(bx,by){if(by<0||by>=bx.length)e.FailWith("Index was outside the bounds of the array.");};v.set=function(bx,by,bz){v.checkBounds(bx,by);bx[by]=bz;};x=w.T=bt.Class({GetEnumerator:function(){return new R.New(this,null,function(bx){var by;by=bx.s;return by.$==0?false:(bx.c=by.$0,bx.s=by.$1,true);},void 0);},GetEnumerator0:function(){return J.Get(this);}},null,x);v.ofList=function(bx){var by,bz;bz=[];by=bx;while(!(by.$==0)){bz.push(w.head(by));by=w.tail(by);}return bz;};v.exists=function(bx,by){var bz,bA,bB,bC;bz=false;bA=0;bC=v.length(by);while(!bz&&bA<bC)if(bx(by[bA]))bz=true;else bA=bA+1;return bz;};v.tryPick=function(bx,by){var bz,bA,bB;bz=null;bA=0;while(bA<by.length&&bz==null){bB=bx(by[bA]);bB!=null&&bB.$==1?bz=bB:void 0;bA=bA+1;}return bz;};v.tryFindIndex=function(bx,by){var bz,bA;bz=null;bA=0;while(bA<by.length&&bz==null){bx(by[bA])?bz={$:1,$0:bA}:void 0;bA=bA+1;}return bz;};v.filter=function(bx,by){var bz,bA,bB;bz=[];for(bA=0,bB=by.length-1;bA<=bB;bA++)if(bx(by[bA]))bz.push(by[bA]);return bz;};v.map=function(bx,by){var bz,bA,bB;bz=new a.Array(by.length);for(bA=0,bB=by.length-1;bA<=bB;bA++)bz[bA]=bx(by[bA]);return bz;};v.iter=function(bx,by){var bz,bA;for(bz=0,bA=by.length-1;bz<=bA;bz++)bx(by[bz]);};v.foldBack=function(bx,by,bz){var bA,bB,bC,bD,bE;bA=bz;bC=by.length;for(bD=1,bE=bC;bD<=bE;bD++)bA=bx(by[bC-bD],bA);return bA;};v.concat=function(bx){return a.Array.prototype.concat.apply([],v.ofSeq(bx));};v.pick=function(bx,by){var bz;bz=v.tryPick(bx,by);return bz==null?e.FailWith("KeyNotFoundException"):bz.$0;};v.ofSeq=function(bx){var by,bz;if(bx instanceof a.Array)return bx.slice();else if(bx instanceof x)return v.ofList(bx);else{by=[];bz=J.Get(bx);try{while(bz.MoveNext())by.push(bz.Current());return by;}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}}};v.choose=function(bx,by){var bz,bA,bB,bC;bz=[];for(bA=0,bB=by.length-1;bA<=bB;bA++){bC=bx(by[bA]);bC==null?void 0:bz.push(bC.$0);}return bz;};v.create=function(bx,by){var bz,bA,bB;bz=new a.Array(bx);for(bA=0,bB=bx-1;bA<=bB;bA++)bz[bA]=by;return bz;};v.init=function(bx,by){var bz,bA,bB;bx<0?e.FailWith("Negative size given."):null;bz=new a.Array(bx);for(bA=0,bB=bx-1;bA<=bB;bA++)bz[bA]=by(bA);return bz;};v.forall=function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=v.length(by);while(bz&&bA<bC)if(bx(by[bA]))bA=bA+1;else bz=false;return bz;};y.Equals=function(bx,by){var bz,bA,bB,bC;if(bx===by)return true;else{bz=typeof bx;if(bz=="object"){if(bx===null||bx===void 0||by===null||by===void 0)return false;else if("Equals"in bx)return bx.Equals(by);else if(bx instanceof a.Array&&by instanceof a.Array)return y.arrayEquals(bx,by);else if(bx instanceof a.Date&&by instanceof a.Date)return y.dateEquals(bx,by);else{bA=[true];for(var bD in bx)if(function(bE){bA[0]=!bx.hasOwnProperty(bE)||by.hasOwnProperty(bE)&&y.Equals(bx[bE],by[bE]);return!bA[0];}(bD))break;if(bA[0]){for(var bE in by)if(function(bF){bA[0]=!by.hasOwnProperty(bF)||bx.hasOwnProperty(bF);return!bA[0];}(bE))break;}return bA[0];}}else return bz=="function"&&("$Func"in bx?bx.$Func===by.$Func&&bx.$Target===by.$Target:"$Invokes"in bx&&"$Invokes"in by&&y.arrayEquals(bx.$Invokes,by.$Invokes));}};y.arrayEquals=function(bx,by){var bz,bA;if(v.length(bx)===v.length(by)){bz=true;bA=0;while(bz&&bA<v.length(bx)){!y.Equals(v.get(bx,bA),v.get(by,bA))?bz=false:void 0;bA=bA+1;}return bz;}else return false;};y.dateEquals=function(bx,by){return bx.getTime()===by.getTime();};y.Hash=function(bx){var by;by=typeof bx;return by=="function"?0:by=="boolean"?bx?1:0:by=="number"?bx:by=="string"?y.hashString(bx):by=="object"?bx==null?0:bx instanceof a.Array?y.hashArray(bx):y.hashObject(bx):0;};y.hashString=function(bx){var by,bz,bA;if(bx===null)return 0;else{by=5381;for(bz=0,bA=bx.length-1;bz<=bA;bz++)by=y.hashMix(by,bx[bz].charCodeAt());return by;}};y.hashArray=function(bx){var by,bz,bA;by=-34948909;for(bz=0,bA=v.length(bx)-1;bz<=bA;bz++)by=y.hashMix(by,y.Hash(v.get(bx,bz)));return by;};y.hashObject=function(bx){var by,bz;if("GetHashCode"in bx)return bx.GetHashCode();else{by=[0];for(var bA in bx)if(function(bB){by[0]=y.hashMix(y.hashMix(by[0],y.hashString(bB)),y.Hash(bx[bB]));return false;}(bA))break;return by[0];}};y.hashMix=function(bx,by){return(bx<<5)+bx+by;};y.Compare=function(bx,by){var bz,bA,bB,bC,bD,bE;if(bx===by)return 0;else{bA=typeof bx;switch(bA=="function"?1:bA=="boolean"?2:bA=="number"?2:bA=="string"?2:bA=="object"?3:0){case 0:return typeof by=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return bx<by?-1:1;case 3:if(bx===null)bB=-1;else if(by===null)bB=1;else if("CompareTo"in bx)bB=bx.CompareTo(by);else if("CompareTo0"in bx)bB=bx.CompareTo0(by);else if(bx instanceof a.Array&&by instanceof a.Array)bB=y.compareArrays(bx,by);else if(bx instanceof a.Date&&by instanceof a.Date)bB=y.compareDates(bx,by);else{bC=[0];for(var bF in bx)if(function(bG){return!bx.hasOwnProperty(bG)?false:!by.hasOwnProperty(bG)?(bC[0]=1,true):(bC[0]=y.Compare(bx[bG],by[bG]),bC[0]!==0);}(bF))break;if(bC[0]===0){for(var bG in by)if(function(bH){return!by.hasOwnProperty(bH)?false:!bx.hasOwnProperty(bH)&&(bC[0]=-1,true);}(bG))break;}bB=bC[0];}return bB;}}};y.compareArrays=function(bx,by){var bz,bA;if(v.length(bx)<v.length(by))return -1;else if(v.length(bx)>v.length(by))return 1;else{bz=0;bA=0;while(bz===0&&bA<v.length(bx)){bz=y.Compare(v.get(bx,bA),v.get(by,bA));bA=bA+1;}return bz;}};y.compareDates=function(bx,by){return y.Compare(bx.getTime(),by.getTime());};u.Map2Unit=function(bx,by){return u.CreateLazy(function(){return m.Map2Unit(bx(),by());});};u.Const=function(bx){var by;by=m.New({$:0,$0:bx});return function(){return by;};};u.CreateLazy=function(bx){var by;by={c:null,o:bx};return function(){var bz,bA;bz=by.c;return bz===null?(bz=by.o(),by.c=bz,(bA=bz.s,bA!=null&&bA.$==0)?by.o=null:m.WhenObsoleteRun(bz,function(){by.c=null;}),bz):bz;};};u.Sink=function(bx,by){function bz(){m.WhenRun(by(),bx,function(){ba.scheduler().Fork(bz);});}ba.scheduler().Fork(bz);};A.CreateText=function(bx){return A.Doc().createTextNode(bx);};A.Doc=function(){O.$cctor();return O.Doc;};A.CreateElement=function(bx){return A.Doc().createElement(bx);};A.ChildrenArray=function(bx){var by,bz,bA;by=[];for(bz=0,bA=bx.childNodes.length-1;bz<=bA;bz++)by.push(bx.childNodes[bz]);return by;};A.IterSelector=function(bx,by,bz){var bA,bB,bC;bA=bx.querySelectorAll(by);for(bB=0,bC=bA.length-1;bB<=bC;bB++)bz(bA[bB]);};A.InsertAt=function(bx,by,bz){var bA;if(!(bz.parentNode===bx&&by===(bA=bz.nextSibling,y.Equals(bA,null)?null:bA)))bx.insertBefore(bz,by);};A.RemoveNode=function(bx,by){if(by.parentNode===bx)bx.removeChild(by);};D.GetFieldValues=function(bx){var by,bz;by=[];for(var bA in bx)by.push(bx[bA]);return by;};F=E.Dictionary=bt.Class({set_Item:function(bx,by){this.set(bx,by);},ContainsKey:function(bx){var by,bz;by=this;bz=this.data[this.hash(bx)];return bz==null?false:v.exists(function(bA){return by.equals.apply(null,[(e.KeyValue(bA))[0],bx]);},bz);},TryGetValue:function(bx,by){var bz,bA,bB;bz=this;bA=this.data[this.hash(bx)];return bA==null?false:(bB=v.tryPick(function(bC){var bD;bD=e.KeyValue(bC);return bz.equals.apply(null,[bD[0],bx])?{$:1,$0:bD[1]}:null;},bA),bB!=null&&bB.$==1&&(by.set(bB.$0),true));},Remove:function(bx){return this.remove(bx);},get_Keys:function(){return new Y.New(this);},set:function(bx,by){var bz,bA,bB,bC;bz=this;bA=this.hash(bx);bB=this.data[bA];bB==null?(this.count=this.count+1,this.data[bA]=new a.Array({K:bx,V:by})):(bC=v.tryFindIndex(function(bD){return bz.equals.apply(null,[(e.KeyValue(bD))[0],bx]);},bB),bC==null?(this.count=this.count+1,bB.push({K:bx,V:by})):bB[bC.$0]={K:bx,V:by});},remove:function(bx){var by,bz,bA,bB;by=this;bz=this.hash(bx);bA=this.data[bz];return bA==null?false:(bB=v.filter(function(bC){return!by.equals.apply(null,[(e.KeyValue(bC))[0],bx]);},bA),v.length(bB)<bA.length&&(this.count=this.count-1,this.data[bz]=bB,true));},get_Item:function(bx){return this.get(bx);},get:function(bx){var by,bz;by=this;bz=this.data[this.hash(bx)];return bz==null?V.notPresent():v.pick(function(bA){var bB;bB=e.KeyValue(bA);return by.equals.apply(null,[bB[0],bx])?{$:1,$0:bB[1]}:null;},bz);},GetEnumerator:function(){return J.Get0(this);},GetEnumerator0:function(){return J.Get0(v.concat(D.GetFieldValues(this.data)));}},f,F);F.New$5=bt.Ctor(function(){F.New$6.call(this,[],y.Equals,y.Hash);},F);F.New$6=bt.Ctor(function(bx,by,bz){var bA,bB;f.New.call(this);this.equals=by;this.hash=bz;this.count=0;this.data=[];bA=J.Get(bx);try{while(bA.MoveNext()){bB=bA.Current();this.set(bB.K,bB.V);}}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}},F);G=g.AttrProxy=bt.Class({},null,G);G.Concat=function(bx){var by;by=n.ofSeqNonCopying(bx);return n.TreeReduce(_3.EmptyAttr(),G.Append,by);};G.Append=function(bx,by){return _3.AppendTree(bx,by);};m.Obsolete=function(bx){var by,bz,bA,bB,bC;bz=bx.s;if(bz==null||(bz!=null&&bz.$==2?(by=bz.$1,false):bz!=null&&bz.$==3?(by=bz.$1,false):true))void 0;else{bx.s=null;for(bA=0,bB=v.length(by)-1;bA<=bB;bA++){bC=v.get(by,bA);typeof bC=="object"?function(bD){m.Obsolete(bD);}(bC):bC();}}};m.New=function(bx){return{s:bx};};H=g.DocElemNode=bt.Class({Equals:function(bx){return this.ElKey===bx.ElKey;},GetHashCode:function(){return this.ElKey;}},null,H);H.New=function(bx,by,bz,bA,bB,bC){var bD;return new H((bD={Attr:bx,Children:by,El:bA,ElKey:bB},(bt.SetOptional(bD,"Delimiters",bz),bt.SetOptional(bD,"Render",bC),bD)));};w.head=function(bx){return bx.$==1?bx.$0:w.listEmpty();};w.tail=function(bx){return bx.$==1?bx.$1:w.listEmpty();};w.listEmpty=function(){return e.FailWith("The input list was empty.");};J.Get=function(bx){return bx instanceof a.Array?J.ArrayEnumerator(bx):y.Equals(typeof bx,"string")?J.StringEnumerator(bx):bx.GetEnumerator();};J.ArrayEnumerator=function(bx){return new R.New(0,null,function(by){var bz;bz=by.s;return bz<v.length(bx)&&(by.c=v.get(bx,bz),by.s=bz+1,true);},void 0);};J.StringEnumerator=function(bx){return new R.New(0,null,function(by){var bz;bz=by.s;return bz<bx.length&&(by.c=bx[bz],by.s=bz+1,true);},void 0);};J.Get0=function(bx){return bx instanceof a.Array?J.ArrayEnumerator(bx):y.Equals(typeof bx,"string")?J.StringEnumerator(bx):"GetEnumerator0"in bx?bx.GetEnumerator0():bx.GetEnumerator();};K.$cctor=function(){K.$cctor=a.ignore;K.LoadedTemplates=new F.New$5();K.LocalTemplatesLoaded=false;K.TextHoleRE="\\${([^}]+)}";};L=E.HashSet=bt.Class({Add:function(bx){return this.add(bx);},Contains:function(bx){var by;by=this.data[this.hash(bx)];return by==null?false:this.arrContains(bx,by);},add:function(bx){var by,bz;by=this.hash(bx);bz=this.data[by];return bz==null?(this.data[by]=[bx],this.count=this.count+1,true):this.arrContains(bx,bz)?false:(bz.push(bx),this.count=this.count+1,true);},arrContains:function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=by.length;while(bz&&bA<bC)if(this.equals.apply(null,[by[bA],bx]))bz=false;else bA=bA+1;return!bz;},ExceptWith:function(bx){var by;by=J.Get(bx);try{while(by.MoveNext())this.Remove(by.Current());}finally{if(typeof by=="object"&&"Dispose"in by)by.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bx){var by,bz,bA,bB;by=0;bz=bc.concat(this.data);for(bA=0,bB=bz.length-1;bA<=bB;bA++)v.set(bx,bA,bz[bA]);},IntersectWith:function(bx){var by,bz,bA,bB,bC;by=new L.New$4(bx,this.equals,this.hash);bz=bc.concat(this.data);for(bA=0,bB=bz.length-1;bA<=bB;bA++){bC=bz[bA];!by.Contains(bC)?this.Remove(bC):void 0;}},Remove:function(bx){var by;by=this.data[this.hash(bx)];return by==null?false:this.arrRemove(bx,by)&&(this.count=this.count-1,true);},arrRemove:function(bx,by){var bz,bA,bB,bC;bz=true;bA=0;bC=by.length;while(bz&&bA<bC)if(this.equals.apply(null,[by[bA],bx])){by.splice.apply(by,[bA,1]);bz=false;}else bA=bA+1;return!bz;},GetEnumerator:function(){return J.Get(bc.concat(this.data));},GetEnumerator0:function(){return J.Get(bc.concat(this.data));}},f,L);L.New$3=bt.Ctor(function(){L.New$4.call(this,[],y.Equals,y.Hash);},L);L.New$4=bt.Ctor(function(bx,by,bz){var bA;f.New.call(this);this.equals=by;this.hash=bz;this.data=[];this.count=0;bA=J.Get(bx);try{while(bA.MoveNext())this.add(bA.Current());}finally{if(typeof bA=="object"&&"Dispose"in bA)bA.Dispose();}},L);L.New$2=bt.Ctor(function(bx){L.New$4.call(this,bx,y.Equals,y.Hash);},L);M.head=function(bx){var by;by=J.Get(bx);try{return by.MoveNext()?by.Current():M.insufficient();}finally{if(typeof by=="object"&&"Dispose"in by)by.Dispose();}};M.fold=function(bx,by,bz){var bA,bB;bA=by;bB=J.Get(bz);try{while(bB.MoveNext())bA=bx(bA,bB.Current());return bA;}finally{if(typeof bB=="object"&&"Dispose"in bB)bB.Dispose();}};M.iter=function(bx,by){var bz;bz=J.Get(by);try{while(bz.MoveNext())bx(bz.Current());}finally{if(typeof bz=="object"&&"Dispose"in bz)bz.Dispose();}};M.map=function(bx,by){return{GetEnumerator:function(){var bz;bz=J.Get(by);return new R.New(null,null,function(bA){return bz.MoveNext()&&(bA.c=bx(bz.Current()),true);},function(){bz.Dispose();});}};};M.max=function(bx){var by,bz,bA;by=J.Get(bx);try{if(!by.MoveNext())M.seqEmpty();bz=by.Current();while(by.MoveNext()){bA=by.Current();y.Compare(bA,bz)===1?bz=bA:void 0;}return bz;}finally{if(typeof by=="object"&&"Dispose"in by)by.Dispose();}};M.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};O.$cctor=function(){O.$cctor=a.ignore;O.Doc=self.document;};P.LinkElement=function(bx,by){P.InsertDoc(bx,by,null);};P.InsertDoc=function(bx,by,bz){var bA;return by!=null&&by.$==1?P.InsertNode(bx,by.$0.El,bz):by!=null&&by.$==2?(bA=by.$0,(bA.Dirty=false,P.InsertDoc(bx,bA.Current,bz))):by==null?bz:by!=null&&by.$==4?P.InsertNode(bx,by.$0.Text,bz):by!=null&&by.$==5?P.InsertNode(bx,by.$0,bz):by!=null&&by.$==6?v.foldBack(function(bB,bC){return bB==null||bB.constructor===z?P.InsertDoc(bx,bB,bC):P.InsertNode(bx,bB,bC);},by.$0.Els,bz):P.InsertDoc(bx,by.$0,P.InsertDoc(bx,by.$1,bz));};P.CreateRunState=function(bx,by){return _6.New(_7.get_Empty(),P.CreateElemNode(bx,_3.EmptyAttr(),by));};P.PerformAnimatedUpdate=function(bx,by,bz){var bA;return Z.get_UseAnimations()?(bA=null,ba.Delay(function(){var bB,bC,bD;bB=_7.FindAll(bz);bC=P.ComputeChangeAnim(by,bB);bD=P.ComputeEnterAnim(by,bB);return ba.Bind(Z.Play(Z.Append(bC,P.ComputeExitAnim(by,bB))),function(){return ba.Bind(P.SyncElemNodesNextFrame(bx,by),function(){return ba.Bind(Z.Play(bD),function(){by.PreviousNodes=bB;return ba.Return(null);});});});})):P.SyncElemNodesNextFrame(bx,by);};P.PerformSyncUpdate=function(bx,by,bz){var bA;bA=_7.FindAll(bz);P.SyncElemNode(bx,by.Top);by.PreviousNodes=bA;};P.CreateElemNode=function(bx,by,bz){var bA;P.LinkElement(bx,bz);bA=_3.Insert(bx,by);return H.New(bA,bz,null,bx,t.Int(),bt.GetOptional(bA.OnAfterRender));};P.InsertNode=function(bx,by,bz){A.InsertAt(bx,bz,by);return by;};P.SyncElemNodesNextFrame=function(bx,by){function bz(bA){a.requestAnimationFrame(function(){P.SyncElemNode(bx,by.Top);bA();});}return _0.BatchUpdatesEnabled()?ba.FromContinuations(function(bA,bB,bC){return bz.apply(null,[bA,bB,bC]);}):(P.SyncElemNode(bx,by.Top),ba.Return(null));};P.ComputeExitAnim=function(bx,by){return Z.Concat(v.map(function(bz){return _3.GetExitAnim(bz.Attr);},_7.ToArray(_7.Except(by,_7.Filter(function(bz){return _3.HasExitAnim(bz.Attr);},bx.PreviousNodes)))));};P.ComputeEnterAnim=function(bx,by){return Z.Concat(v.map(function(bz){return _3.GetEnterAnim(bz.Attr);},_7.ToArray(_7.Except(bx.PreviousNodes,_7.Filter(function(bz){return _3.HasEnterAnim(bz.Attr);},by)))));};P.ComputeChangeAnim=function(bx,by){var bz;function bA(bB){return _3.HasChangeAnim(bB.Attr);}bz=function(bB){return _7.Filter(bA,bB);};return Z.Concat(v.map(function(bB){return _3.GetChangeAnim(bB.Attr);},_7.ToArray(_7.Intersect(bz(bx.PreviousNodes),bz(by)))));};P.SyncElemNode=function(bx,by){!bx?P.SyncElement(by):void 0;P.Sync(by.Children);P.AfterRender(by);};P.SyncElement=function(bx){function by(bz){function bA(bB){var bC,bD;return bB!=null&&bB.$==0?bA(bB.$0)||bA(bB.$1):bB!=null&&bB.$==2?(bC=bB.$0,bC.Dirty||bA(bC.Current)):bB!=null&&bB.$==6&&(bD=bB.$0,bD.Dirty||v.exists(by,bD.Holes));}return bA(bz.Children);}_3.Sync(bx.El,bx.Attr);by(bx)?P.DoSyncElement(bx):void 0;};P.Sync=function(bx){var by,bz;if(bx!=null&&bx.$==1)P.SyncElemNode(false,bx.$0);else if(bx!=null&&bx.$==2)P.Sync(bx.$0.Current);else if(bx==null);else if(bx!=null&&bx.$==5);else if(bx!=null&&bx.$==4){by=bx.$0;by.Dirty?(by.Text.nodeValue=by.Value,by.Dirty=false):void 0;}else if(bx!=null&&bx.$==6){bz=bx.$0;v.iter(function(bA){P.SyncElemNode(false,bA);},bz.Holes);v.iter(function(bA){_3.Sync(bA[0],bA[1]);},bz.Attrs);P.AfterRender(bz);}else{P.Sync(bx.$0);P.Sync(bx.$1);}};P.AfterRender=function(bx){var by;by=bt.GetOptional(bx.Render);by!=null&&by.$==1?(by.$0(bx.El),bt.SetOptional(bx,"Render",null)):void 0;};P.DoSyncElement=function(bx){var by,bz,bA;function bB(bC,bD){var bE,bF;return bC!=null&&bC.$==1?bC.$0.El:bC!=null&&bC.$==2?(bE=bC.$0,bE.Dirty?(bE.Dirty=false,P.InsertDoc(by,bE.Current,bD)):bB(bE.Current,bD)):bC==null?bD:bC!=null&&bC.$==4?bC.$0.Text:bC!=null&&bC.$==5?bC.$0:bC!=null&&bC.$==6?(bF=bC.$0,(bF.Dirty?bF.Dirty=false:void 0,v.foldBack(function(bG,bH){return bG==null||bG.constructor===z?bB(bG,bH):bG;},bF.Els,bD))):bB(bC.$0,bB(bC.$1,bD));}by=bx.El;bl.Iter((bz=bx.El,function(bC){A.RemoveNode(bz,bC);}),bl.Except(bl.DocChildren(bx),bl.Children(bx.El,bt.GetOptional(bx.Delimiters))));bB(bx.Children,(bA=bt.GetOptional(bx.Delimiters),bA!=null&&bA.$==1?bA.$0[1]:null));};Q=g.Elt=bt.Class({},i,Q);Q.New=function(bx,by,bz){var bA,bB;bA=P.CreateElemNode(bx,by,bz.docNode);bB=_2.Create(bz.updates);return new Q.New$1({$:1,$0:bA},u.Map2Unit(_3.Updates(bA.Attr),bB.v),bx,bB);};Q.New$1=bt.Ctor(function(bx,by,bz,bA){i.New.call(this,bx,by);this.docNode$1=bx;this.updates$1=by;this.elt=bz;this.rvUpdates=bA;},Q);R=J.T=bt.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,R);R.New=bt.Ctor(function(bx,by,bz,bA){f.New.call(this);this.s=bx;this.c=by;this.n=bz;this.d=bA;},R);S.$cctor=function(){S.$cctor=a.ignore;S.counter=0;};U.New=function(bx,by,bz,bA){var bB;bB={DynElem:bx,DynFlags:by,DynNodes:bz};bt.SetOptional(bB,"OnAfterRender",bA);return bB;};V.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};W.convertTextNode=function(bx){var by,bz,bA,bB,bC,bD;by=null;bz=0;bB=bx.textContent;bC=new a.RegExp(p.TextHoleRE(),"g");while(by=bC.exec(bB),by!==null){bx.parentNode.insertBefore(self.document.createTextNode(X.string(bB,{$:1,$0:bz},{$:1,$0:bC.lastIndex-v.get(by,0).length-1})),bx);bz=bC.lastIndex;bD=self.document.createElement("span");bD.setAttribute("ws-replace",v.get(by,1).toLowerCase());bx.parentNode.insertBefore(bD,bx);}bC.lastIndex=0;bx.textContent=X.string(bB,{$:1,$0:bz},null);};W.failNotLoaded=function(bx){bu.warn("Instantiating non-loaded template",bx);};W.fillTextHole=function(bx,by,bz){var bA;bA=bx.querySelector("[ws-replace]");return y.Equals(bA,null)?(bu.warn("Filling non-existent text hole",bz),null):(bA.parentNode.replaceChild(new a.Text(by),bA),{$:1,$0:bA.getAttribute("ws-replace")});};W.removeHolesExcept=function(bx,by){function bz(bA){A.IterSelector(bx,"["+bA+"]",function(bB){if(!by.Contains(bB.getAttribute(bA)))bB.removeAttribute(bA);});}bz("ws-attr");bz("ws-onafterrender");bz("ws-var");A.IterSelector(bx,"[ws-hole]",function(bA){if(!by.Contains(bA.getAttribute("ws-hole"))){bA.removeAttribute("ws-hole");while(bA.hasChildNodes())bA.removeChild(bA.lastChild);}});A.IterSelector(bx,"[ws-replace]",function(bA){if(!by.Contains(bA.getAttribute("ws-replace")))bA.parentNode.removeChild(bA);});A.IterSelector(bx,"[ws-on]",function(bA){bA.setAttribute("ws-on",_4.concat(" ",v.filter(function(bB){return by.Contains(v.get(_4.SplitChars(bB,[":"],1),1));},_4.SplitChars(bA.getAttribute("ws-on"),[" "],1))));});A.IterSelector(bx,"[ws-attr-holes]",function(bA){var bB,bC,bD,bE,bF;bB=_4.SplitChars(bA.getAttribute("ws-attr-holes"),[" "],1);for(bC=0,bD=bB.length-1;bC<=bD;bC++){bE=v.get(bB,bC);bA.setAttribute(bE,(bF=new a.RegExp(p.TextHoleRE(),"g"),bA.getAttribute(bE).replace(bF,function(bG,bH){return by.Contains(bH)?bG:"";})));}});};W.fillInstanceAttrs=function(bx,by){var bz,bA,bB,bC,bD;W.convertAttrs(by);bz=by.nodeName.toLowerCase();bA=bx.querySelector("[ws-attr="+bz+"]");if(y.Equals(bA,null))bu.warn("Filling non-existent attr hole",bz);else{bA.removeAttribute("ws-attr");for(bB=0,bC=by.attributes.length-1;bB<=bC;bB++){bD=by.attributes.item(bB);bD.name==="class"&&bA.hasAttribute("class")?bA.setAttribute("class",bA.getAttribute("class")+" "+bD.nodeValue):bA.setAttribute(bD.name,bD.nodeValue);}}};W.mapHoles=function(bx,by){function bz(bA){A.IterSelector(bx,"["+bA+"]",function(bB){var bC,bD;bC=(bD=null,[by.TryGetValue(bB.getAttribute(bA).toLowerCase(),{get:function(){return bD;},set:function(bE){bD=bE;}}),bD]);bC[0]?bB.setAttribute(bA,bC[1]):void 0;});}bz("ws-hole");bz("ws-replace");bz("ws-attr");bz("ws-onafterrender");bz("ws-var");A.IterSelector(bx,"[ws-on]",function(bA){bA.setAttribute("ws-on",_4.concat(" ",v.map(function(bB){var bC,bD,bE;bC=_4.SplitChars(bB,[":"],1);bD=(bE=null,[by.TryGetValue(v.get(bC,1),{get:function(){return bE;},set:function(bF){bE=bF;}}),bE]);return bD[0]?v.get(bC,0)+":"+bD[1]:bB;},_4.SplitChars(bA.getAttribute("ws-on"),[" "],1))));});A.IterSelector(bx,"[ws-attr-holes]",function(bA){var bB,bC,bD;bB=_4.SplitChars(bA.getAttribute("ws-attr-holes"),[" "],1);for(bC=0,bD=bB.length-1;bC<=bD;bC++)(function(){var bE;function bF(bG,bH){var bI;bI=e.KeyValue(bH);return bG.replace(new a.RegExp("\\${"+bI[0]+"}","ig"),"${"+bI[1]+"}");}bE=v.get(bB,bC);return bA.setAttribute(bE,(((bt.Curried3(M.fold))(bF))(bA.getAttribute(bE)))(by));}());});};W.fill=function(bx,by,bz){while(true)if(bx.hasChildNodes())bz=by.insertBefore(bx.lastChild,bz);else return null;};W.convertAttrs=function(bx){var bz,bA,bB,bC,bD,bE,bF,bG;function by(bH){var bI;bI=bx.getAttribute(bH);bI===null?void 0:bx.setAttribute(bH,bI.toLowerCase());}bz=bx.attributes;bA=[];bB=[];bC=[];for(bD=0,bE=bz.length-1;bD<=bE;bD++){bF=bz.item(bD);_4.StartsWith(bF.nodeName,"ws-on")&&bF.nodeName!=="ws-onafterrender"&&bF.nodeName!=="ws-on"?(bA.push(bF.nodeName),bB.push(X.string(bF.nodeName,{$:1,$0:"ws-on".length},null)+":"+bF.nodeValue.toLowerCase())):!_4.StartsWith(bF.nodeName,"ws-")&&(new a.RegExp(p.TextHoleRE())).test(bF.nodeValue)?(bF.nodeValue=(bG=new a.RegExp(p.TextHoleRE(),"g"),bF.nodeValue.replace(bG,function(bH,bI){return"${"+bI.toLowerCase()+"}";})),bC.push(bF.nodeName)):void 0;}!(bB.length==0)?bx.setAttribute("ws-on",_4.concat(" ",bB)):void 0;!(bC.length==0)?bx.setAttribute("ws-attr-holes",_4.concat(" ",bC)):void 0;by("ws-hole");by("ws-replace");by("ws-attr");by("ws-onafterrender");by("ws-var");v.iter(function(bH){bx.removeAttribute(bH);},bA);};X.string=function(bx,by,bz){return by==null?bz!=null&&bz.$==1?bx.slice(0,bz.$0+1):"":bz==null?bx.slice(by.$0):bx.slice(by.$0,bz.$0+1);};M.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};Y=E.KeyCollection=bt.Class({GetEnumerator$1:function(){return J.Get(M.map(function(bx){return bx.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,Y);Y.New=bt.Ctor(function(bx){f.New.call(this);this.d=bx;},Y);Z.get_UseAnimations=function(){return _8.UseAnimations();};Z.Play=function(bx){var by;by=null;return ba.Delay(function(){return ba.Bind(Z.Run(a.ignore,_8.Actions(bx)),function(){_8.Finalize(bx);return ba.Return(null);});});};Z.Append=function(bx,by){return{$:0,$0:bb.Append(bx.$0,by.$0)};};Z.Run=function(bx,by){var bz;function bA(bB){function bC(bD,bE){var bF;bF=bE-bD;by.Compute(bF);bx();return bF<=bz?void a.requestAnimationFrame(function(bG){bC(bD,bG);}):bB();}a.requestAnimationFrame(function(bD){bC(bD,bD);});}bz=by.Duration;return bz===0?ba.Zero():ba.FromContinuations(function(bB,bC,bD){return bA.apply(null,[bB,bC,bD]);});};Z.Concat=function(bx){return{$:0,$0:bb.Concat(M.map(_8.List,bx))};};_0.BatchUpdatesEnabled=function(){_9.$cctor();return _9.BatchUpdatesEnabled;};_1.StartProcessor=function(bx){var by;function bz(){var bA;bA=null;return ba.Delay(function(){return ba.Bind(bx,function(){var bB;bB=by[0];return bB===1?(by[0]=0,ba.Zero()):bB===2?(by[0]=1,bz()):ba.Zero();});});}by=[0];return function(){var bA;bA=by[0];bA===0?(by[0]=1,ba.Start(bz(),null)):bA===1?by[0]=2:void 0;};};_2=g.Updates=bt.Class({},null,_2);_2.Create=function(bx){var by;by=null;by=_2.New(bx,null,function(){var bz;bz=by.s;return bz===null?(bz=m.Copy(by.c()),by.s=bz,m.WhenObsoleteRun(bz,function(){by.s=null;}),bz):bz;});return by;};_2.New=function(bx,by,bz){return new _2({c:bx,s:by,v:bz});};_3.Updates=function(bx){return n.MapTreeReduce(function(by){return by.NChanged();},u.Const(),u.Map2Unit,bx.DynNodes);};_3.AppendTree=function(bx,by){var bz;return bx===null?by:by===null?bx:(bz=new G({$:2,$0:bx,$1:by}),(_3.SetFlags(bz,_3.Flags(bx)|_3.Flags(by)),bz));};_3.EmptyAttr=function(){_.$cctor();return _.EmptyAttr;};_3.Insert=function(bx,by){var bz,bA,bB;function bC(bD){if(!(bD===null))if(bD!=null&&bD.$==1)bz.push(bD.$0);else if(bD!=null&&bD.$==2){bC(bD.$0);bC(bD.$1);}else if(bD!=null&&bD.$==3)bD.$0(bx);else if(bD!=null&&bD.$==4)bA.push(bD.$0);}bz=[];bA=[];bC(by);bB=bz.slice(0);return U.New(bx,_3.Flags(by),bB,bA.length===0?null:{$:1,$0:function(bD){M.iter(function(bE){bE(bD);},bA);}});};_3.SetFlags=function(bx,by){bx.flags=by;};_3.Flags=function(bx){return bx!==null&&bx.hasOwnProperty("flags")?bx.flags:0;};_3.HasExitAnim=function(bx){var by;by=2;return(bx.DynFlags&by)===by;};_3.GetExitAnim=function(bx){return _3.GetAnim(bx,function(by,bz){return by.NGetExitAnim(bz);});};_3.HasEnterAnim=function(bx){var by;by=1;return(bx.DynFlags&by)===by;};_3.GetEnterAnim=function(bx){return _3.GetAnim(bx,function(by,bz){return by.NGetEnterAnim(bz);});};_3.HasChangeAnim=function(bx){var by;by=4;return(bx.DynFlags&by)===by;};_3.GetChangeAnim=function(bx){return _3.GetAnim(bx,function(by,bz){return by.NGetChangeAnim(bz);});};_3.GetAnim=function(bx,by){return Z.Concat(v.map(function(bz){return by(bz,bx.DynElem);},bx.DynNodes));};_3.Sync=function(bx,by){v.iter(function(bz){bz.NSync(bx);},by.DynNodes);};_4.concat=function(bx,by){return v.ofSeq(by).join(bx);};_4.SplitChars=function(bx,by,bz){return _4.Split(bx,new a.RegExp("["+_4.RegexEscape(by.join(""))+"]"),bz);};_4.StartsWith=function(bx,by){return bx.substring(0,by.length)==by;};_4.Split=function(bx,by,bz){return bz===1?v.filter(function(bA){return bA!=="";},_4.SplitWith(bx,by)):_4.SplitWith(bx,by);};_4.RegexEscape=function(bx){return bx.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_4.SplitWith=function(bx,by){return bx.split(by);};_6.New=function(bx,by){return{PreviousNodes:bx,Top:by};};_7.get_Empty=function(){return{$:0,$0:new L.New$3()};};_7.FindAll=function(bx){var by;function bz(bB){if(bB!=null&&bB.$==0){bz(bB.$0);bz(bB.$1);}else if(bB!=null&&bB.$==1)bA(bB.$0);else if(bB!=null&&bB.$==2)bz(bB.$0.Current);else if(bB!=null&&bB.$==6)v.iter(bA,bB.$0.Holes);}function bA(bB){by.push(bB);bz(bB.Children);}by=[];bz(bx);return{$:0,$0:new L.New$2(by)};};_7.Filter=function(bx,by){return{$:0,$0:bi.Filter(bx,by.$0)};};_7.Except=function(bx,by){return{$:0,$0:bi.Except(bx.$0,by.$0)};};_7.ToArray=function(bx){return bi.ToArray(bx.$0);};_7.Intersect=function(bx,by){return{$:0,$0:bi.Intersect(bx.$0,by.$0)};};_8.UseAnimations=function(){$.$cctor();return $.UseAnimations;};_8.Actions=function(bx){return _8.ConcatActions(v.choose(function(by){return by.$==1?{$:1,$0:by.$0}:null;},bb.ToArray(bx.$0)));};_8.Finalize=function(bx){v.iter(function(by){if(by.$==0)by.$0();},bb.ToArray(bx.$0));};_8.ConcatActions=function(bx){var by,bz,bA,bB;by=n.ofSeqNonCopying(bx);bz=v.length(by);return bz===0?_8.Const():bz===1?v.get(by,0):(bA=M.max(M.map(function(bC){return bC.Duration;},by)),(bB=v.map(function(bC){return _8.Prolong(bA,bC);},by),_8.Def(bA,function(bC){v.iter(function(bD){bD.Compute(bC);},bB);})));};_8.List=function(bx){return bx.$0;};_8.Const=function(bx){return _8.Def(0,function(){return bx;});};_8.Def=function(bx,by){return{Compute:by,Duration:bx};};_8.Prolong=function(bx,by){var bz,bA,bB;bz=by.Compute;bA=by.Duration;bB=bo.Create(function(){return by.Compute(by.Duration);});return{Compute:function(bC){return bC>=bA?bB.f():bz(bC);},Duration:bx};};_9.$cctor=function(){_9.$cctor=a.ignore;_9.BatchUpdatesEnabled=true;};_.$cctor=function(){_.$cctor=a.ignore;_.EmptyAttr=null;};$.$cctor=function(){$.$cctor=a.ignore;$.CubicInOut=be.Custom(function(bx){var by;by=bx*bx;return 3*by-2*(by*bx);});$.UseAnimations=true;};ba.Delay=function(bx){return function(by){try{(bx(null))(by);}catch(bz){by.k({$:1,$0:bz});}};};ba.Bind=function(bx,by){return ba.checkCancel(function(bz){bx(bf.New(function(bA){var bB;if(bA.$==0){bB=bA.$0;ba.scheduler().Fork(function(){try{(by(bB))(bz);}catch(bC){bz.k({$:1,$0:bC});}});}else ba.scheduler().Fork(function(){bz.k(bA);});},bz.ct));});};ba.Zero=function(){bg.$cctor();return bg.Zero;};ba.Start=function(bx,by){var bz,bA;bz=(bA=(ba.defCTS())[0],by==null?bA:by.$0);ba.scheduler().Fork(function(){if(!bz.c)bx(bf.New(function(bB){if(bB.$==1)ba.UncaughtAsyncError(bB.$0);},bz));});};ba.Return=function(bx){return function(by){by.k({$:0,$0:bx});};};ba.checkCancel=function(bx){return function(by){if(by.ct.c)ba.cancel(by);else bx(by);};};ba.defCTS=function(){bg.$cctor();return bg.defCTS;};ba.UncaughtAsyncError=function(bx){bu.log("WebSharper: Uncaught asynchronous exception",bx);};ba.FromContinuations=function(bx){return function(by){var bz;function bA(bB){if(bz[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bz[0]=true;ba.scheduler().Fork(bB);}}bz=[false];bx(function(bB){bA(function(){by.k({$:0,$0:bB});});},function(bB){bA(function(){by.k({$:1,$0:bB});});},function(bB){bA(function(){by.k({$:2,$0:bB});});});};};ba.cancel=function(bx){bx.k({$:2,$0:new bn.New(bx.ct)});};ba.scheduler=function(){bg.$cctor();return bg.scheduler;};bb.Append=function(bx,by){return bx.$==0?by:by.$==0?bx:{$:2,$0:bx,$1:by};};bb.ToArray=function(bx){var by;function bz(bA){if(bA.$==1)by.push(bA.$0);else if(bA.$==2){bz(bA.$0);bz(bA.$1);}else if(bA.$==3)v.iter(function(bB){by.push(bB);},bA.$0);}by=[];bz(bx);return by.slice(0);};bb.Concat=function(bx){var by;by=n.ofSeqNonCopying(bx);return n.TreeReduce(bb.Empty(),bb.Append,by);};bb.Empty=function(){bp.$cctor();return bp.Empty;};bc.concat=function(bx){var by,bz;by=[];for(var bA in bx)by.push.apply(by,bx[bA]);return by;};bd.Clear=function(bx){bx.splice(0,v.length(bx));};be=g.Easing=bt.Class({},f,be);be.Custom=function(bx){return new be.New(bx);};be.New=bt.Ctor(function(bx){f.New.call(this);this.transformTime=bx;},be);bf.New=function(bx,by){return{k:bx,ct:by};};bg.$cctor=function(){bg.$cctor=a.ignore;bg.noneCT=bh.New(false,[]);bg.scheduler=new bj.New();bg.defCTS=[new bk.New()];bg.Zero=ba.Return();bg.GetCT=function(bx){bx.k({$:0,$0:bx.ct});};};bh.New=function(bx,by){return{c:bx,r:by};};bi.Filter=function(bx,by){return new L.New$2(v.filter(bx,bi.ToArray(by)));};bi.Except=function(bx,by){var bz;bz=new L.New$2(bi.ToArray(by));bz.ExceptWith(bi.ToArray(bx));return bz;};bi.ToArray=function(bx){var by;by=v.create(bx.get_Count(),void 0);bx.CopyTo(by);return by;};bi.Intersect=function(bx,by){var bz;bz=new L.New$2(bi.ToArray(bx));bz.IntersectWith(bi.ToArray(by));return bz;};bj=ba.Scheduler=bt.Class({Fork:function(bx){var by;by=this;this.robin.push(bx);this.idle?(this.idle=false,a.setTimeout(function(){by.tick();},0)):void 0;},tick:function(){var bx,by,bz;by=this;bz=bw.now();bx=true;while(bx)if(this.robin.length===0){this.idle=true;bx=false;}else{(this.robin.shift())();bw.now()-bz>40?(a.setTimeout(function(){by.tick();},0),bx=false):void 0;}}},f,bj);bj.New=bt.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bj);bk=d.CancellationTokenSource=bt.Class({},f,bk);bk.New=bt.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bk);bl.Children=function(bx,by){var bz,bA,bB;if(by!=null&&by.$==1){bB=[];bz=by.$0[0].nextSibling;while(bz!==by.$0[1]){bB.push(bz);bz=bz.nextSibling;}return{$:0,$0:bB};}else return{$:0,$0:v.init(bx.childNodes.length,(bA=bx.childNodes,function(bC){return bA[bC];}))};};bl.Except=function(bx,by){var bz;bz=bx.$0;return{$:0,$0:v.filter(function(bA){return v.forall(function(bB){return!(bA===bB);},bz);},by.$0)};};bl.Iter=function(bx,by){v.iter(bx,by.$0);};bl.DocChildren=function(bx){var by;function bz(bA){if(bA!=null&&bA.$==2)bz(bA.$0.Current);else if(bA!=null&&bA.$==1)by.push(bA.$0.El);else if(bA==null);else if(bA!=null&&bA.$==5)by.push(bA.$0);else if(bA!=null&&bA.$==4)by.push(bA.$0.Text);else if(bA!=null&&bA.$==6)v.iter(function(bB){if(bB==null||bB.constructor===z)bz(bB);else by.push(bB);},bA.$0.Els);else{bz(bA.$0);bz(bA.$1);}}by=[];bz(bx.Children);return{$:0,$0:n.ofSeqNonCopying(by)};};bn=d.OperationCanceledException=bt.Class({},bm,bn);bn.New=bt.Ctor(function(bx){bn.New$1.call(this,"The operation was canceled.",null,bx);},bn);bn.New$1=bt.Ctor(function(bx,by,bz){this.message=bx;this.inner=by;z.setPrototypeOf(this,bn.prototype);this.ct=bz;},bn);bo.Create=function(bx){return br.New(false,bx,bo.forceLazy);};bo.forceLazy=function(){var bx;bx=this.v();this.c=true;this.v=bx;this.f=bo.cachedLazy;return bx;};bo.cachedLazy=function(){return this.v;};bp.$cctor=function(){bp.$cctor=a.ignore;bp.Empty={$:0};};br.New=function(bx,by,bz){return{c:bx,v:by,f:bz};};bt.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
